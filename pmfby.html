<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pradhan Mantri Fasal Bima Yojana (PMFBY)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .header p {
            color: #34495e;
            font-size: 1.1rem;
        }

        .nav-tabs {
            display: flex;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 5px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }

        .nav-tab {
            flex: 1;
            background: transparent;
            border: none;
            padding: 15px 20px;
            color: white;
            font-size: 1rem;
            cursor: pointer;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .nav-tab.active {
            background: rgba(255, 255, 255, 0.9);
            color: #2c3e50;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .nav-tab:hover:not(.active) {
            background: rgba(255, 255, 255, 0.2);
        }

        .tab-content {
            display: none;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
            animation: fadeIn 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .form-group label {
            display: block;
            color: #2c3e50;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e1e8ed;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 10px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-right: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
        }

        .btn-success {
            background: linear-gradient(135deg, #00b894 0%, #00a085 100%);
        }

        .card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: white;
            margin-bottom: 10px;
        }

        .stat-label {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1rem;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .table th,
        .table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e1e8ed;
        }

        .table th {
            background: rgba(102, 126, 234, 0.1);
            font-weight: 600;
            color: #2c3e50;
        }

        .status {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .status.active {
            background: #d4edda;
            color: #155724;
        }

        .status.pending {
            background: #fff3cd;
            color: #856404;
        }

        .status.rejected {
            background: #f8d7da;
            color: #721c24;
        }

        .alert {
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border-color: #28a745;
        }

        .alert-info {
            background: #d6eaf8;
            color: #0c5460;
            border-color: #17a2b8;
        }

        .search-box {
            width: 100%;
            max-width: 400px;
            padding: 12px 15px;
            border: 2px solid #e1e8ed;
            border-radius: 25px;
            font-size: 1rem;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .nav-tabs {
                flex-direction: column;
            }
            
            .header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üåæ Pradhan Mantri Fasal Bima Yojana</h1>
            <p>Comprehensive Crop Insurance Management System</p>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('dashboard')">Dashboard</button>
            <button class="nav-tab" onclick="showTab('register')">Farmer Registration</button>
            <button class="nav-tab" onclick="showTab('insurance')">Apply Insurance</button>
            <button class="nav-tab" onclick="showTab('claims')">Claims</button>
            <button class="nav-tab" onclick="showTab('policies')">My Policies</button>
            <button class="nav-tab" onclick="showTab('admin')">Admin Panel</button>
        </div>

        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <h2>üìä Dashboard Overview</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalFarmers">1,24,567</div>
                    <div class="stat-label">Registered Farmers</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="activePolicies">89,234</div>
                    <div class="stat-label">Active Policies</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="claimsProcessed">45,123</div>
                    <div class="stat-label">Claims Processed</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalPayout">‚Çπ234.5 Cr</div>
                    <div class="stat-label">Total Payout</div>
                </div>
            </div>

            <div class="alert alert-info">
                <strong>üå¶Ô∏è Weather Alert:</strong> Heavy rainfall predicted in North India. Farmers are advised to take necessary precautions for their crops.
            </div>

            <div class="card">
                <h3>Recent Activities</h3>
                <table class="table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Activity</th>
                            <th>Farmer Name</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="recentActivities">
                        <tr>
                            <td>2024-05-25</td>
                            <td>New Policy Application</td>
                            <td>Ram Kumar</td>
                            <td><span class="status pending">Pending</span></td>
                        </tr>
                        <tr>
                            <td>2024-05-24</td>
                            <td>Claim Settlement</td>
                            <td>Sita Devi</td>
                            <td><span class="status active">Approved</span></td>
                        </tr>
                        <tr>
                            <td>2024-05-23</td>
                            <td>Premium Payment</td>
                            <td>Mohan Singh</td>
                            <td><span class="status active">Completed</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Farmer Registration Tab -->
        <div id="register" class="tab-content">
            <h2>üë®‚Äçüåæ Farmer Registration</h2>
            
            <form id="farmerRegistrationForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="farmerName">Full Name *</label>
                        <input type="text" id="farmerName" required>
                    </div>
                    <div class="form-group">
                        <label for="fatherName">Father's Name *</label>
                        <input type="text" id="fatherName" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="aadhaar">Aadhaar Number *</label>
                        <input type="text" id="aadhaar" pattern="[0-9]{12}" maxlength="12" required>
                    </div>
                    <div class="form-group">
                        <label for="mobile">Mobile Number *</label>
                        <input type="tel" id="mobile" pattern="[0-9]{10}" maxlength="10" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="state">State *</label>
                        <select id="state" required>
                            <option value="">Select State</option>
                            <option value="UP">Uttar Pradesh</option>
                            <option value="MP">Madhya Pradesh</option>
                            <option value="RJ">Rajasthan</option>
                            <option value="PB">Punjab</option>
                            <option value="HR">Haryana</option>
                            <option value="BH">Bihar</option>
                            <option value="WB">West Bengal</option>
                            <option value="MH">Maharashtra</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="district">District *</label>
                        <select id="district" required>
                            <option value="">Select District</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="village">Village *</label>
                        <input type="text" id="village" required>
                    </div>
                    <div class="form-group">
                        <label for="pincode">PIN Code *</label>
                        <input type="text" id="pincode" pattern="[0-9]{6}" maxlength="6" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="bankAccount">Bank Account Number *</label>
                    <input type="text" id="bankAccount" required>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="ifsc">IFSC Code *</label>
                        <input type="text" id="ifsc" required>
                    </div>
                    <div class="form-group">
                        <label for="landArea">Total Land Area (Hectares) *</label>
                        <input type="number" id="landArea" step="0.01" min="0" required>
                    </div>
                </div>

                <button type="submit" class="btn">Register Farmer</button>
            </form>
        </div>

        <!-- Insurance Application Tab -->
        <div id="insurance" class="tab-content">
            <h2>üõ°Ô∏è Apply for Crop Insurance</h2>
            
            <form id="insuranceApplicationForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="insuranceFarmerId">Farmer ID *</label>
                        <input type="text" id="insuranceFarmerId" placeholder="Enter your Farmer ID" required>
                    </div>
                    <div class="form-group">
                        <label for="season">Season *</label>
                        <select id="season" required>
                            <option value="">Select Season</option>
                            <option value="Kharif">Kharif (Monsoon)</option>
                            <option value="Rabi">Rabi (Winter)</option>
                            <option value="Zaid">Zaid (Summer)</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="cropType">Crop Type *</label>
                        <select id="cropType" required>
                            <option value="">Select Crop</option>
                            <option value="Rice">Rice</option>
                            <option value="Wheat">Wheat</option>
                            <option value="Cotton">Cotton</option>
                            <option value="Sugarcane">Sugarcane</option>
                            <option value="Maize">Maize</option>
                            <option value="Soybean">Soybean</option>
                            <option value="Groundnut">Groundnut</option>
                            <option value="Sunflower">Sunflower</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="sowingArea">Sowing Area (Hectares) *</label>
                        <input type="number" id="sowingArea" step="0.01" min="0" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="sowingDate">Sowing Date *</label>
                        <input type="date" id="sowingDate" required>
                    </div>
                    <div class="form-group">
                        <label for="sumInsured">Sum Insured (‚Çπ) *</label>
                        <input type="number" id="sumInsured" min="0" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="premiumAmount">Premium Amount (‚Çπ)</label>
                        <input type="number" id="premiumAmount" readonly>
                    </div>
                    <div class="form-group">
                        <label for="farmerShare">Farmer's Share (‚Çπ)</label>
                        <input type="number" id="farmerShare" readonly>
                    </div>
                </div>

                <div class="alert alert-info">
                    <strong>Premium Calculation:</strong>
                    <ul style="margin-top: 10px;">
                        <li>Kharif crops: 2% of sum insured (Farmer pays 1.5%)</li>
                        <li>Rabi crops: 1.5% of sum insured (Farmer pays 1.5%)</li>
                        <li>Commercial/Horticultural crops: 5% of sum insured (Farmer pays 5%)</li>
                    </ul>
                </div>

                <button type="submit" class="btn">Apply for Insurance</button>
            </form>
        </div>

        <!-- Claims Tab -->
        <div id="claims" class="tab-content">
            <h2>üí∞ Crop Loss Claims</h2>
            
            <div class="card">
                <h3>File New Claim</h3>
                <form id="claimForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="claimFarmerId">Farmer ID *</label>
                            <input type="text" id="claimFarmerId" required>
                        </div>
                        <div class="form-group">
                            <label for="policyNumber">Policy Number *</label>
                            <input type="text" id="policyNumber" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="lossType">Type of Loss *</label>
                            <select id="lossType" required>
                                <option value="">Select Loss Type</option>
                                <option value="Drought">Drought</option>
                                <option value="Flood">Flood</option>
                                <option value="Cyclone">Cyclone/Storm</option>
                                <option value="Hailstorm">Hailstorm</option>
                                <option value="Pest">Pest Attack</option>
                                <option value="Disease">Plant Disease</option>
                                <option value="Fire">Fire</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="lossDate">Date of Loss *</label>
                            <input type="date" id="lossDate" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="affectedArea">Affected Area (Hectares) *</label>
                            <input type="number" id="affectedArea" step="0.01" min="0" required>
                        </div>
                        <div class="form-group">
                            <label for="lossPercentage">Estimated Loss (%) *</label>
                            <input type="number" id="lossPercentage" min="0" max="100" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="lossDescription">Description of Loss *</label>
                        <textarea id="lossDescription" rows="4" required></textarea>
                    </div>

                    <button type="submit" class="btn">File Claim</button>
                </form>
            </div>

            <div class="card">
                <h3>My Claims Status</h3>
                <input type="text" class="search-box" placeholder="Search claims..." id="claimSearch">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Claim ID</th>
                            <th>Policy Number</th>
                            <th>Loss Type</th>
                            <th>Claim Amount</th>
                            <th>Status</th>
                            <th>Filed Date</th>
                        </tr>
                    </thead>
                    <tbody id="claimsTable">
                        <tr>
                            <td>CLM001</td>
                            <td>PMFBY/2024/001</td>
                            <td>Drought</td>
                            <td>‚Çπ25,000</td>
                            <td><span class="status pending">Under Review</span></td>
                            <td>2024-05-20</td>
                        </tr>
                        <tr>
                            <td>CLM002</td>
                            <td>PMFBY/2024/002</td>
                            <td>Flood</td>
                            <td>‚Çπ40,000</td>
                            <td><span class="status active">Approved</span></td>
                            <td>2024-05-15</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- My Policies Tab -->
        <div id="policies" class="tab-content">
            <h2>üìã My Insurance Policies</h2>
            
            <div class="form-group">
                <label for="policyFarmerId">Enter Farmer ID to view policies:</label>
                <input type="text" id="policyFarmerId" placeholder="Enter your Farmer ID">
                <button class="btn" onclick="loadPolicies()">Load Policies</button>
            </div>

            <div id="policiesContainer">
                <div class="card">
                    <h3>Active Policies</h3>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Policy Number</th>
                                <th>Crop</th>
                                <th>Season</th>
                                <th>Sum Insured</th>
                                <th>Premium Paid</th>
                                <th>Status</th>
                                <th>Valid Till</th>
                            </tr>
                        </thead>
                        <tbody id="activePoliciesTable">
                            <tr>
                                <td>PMFBY/2024/001</td>
                                <td>Wheat</td>
                                <td>Rabi 2024</td>
                                <td>‚Çπ50,000</td>
                                <td>‚Çπ750</td>
                                <td><span class="status active">Active</span></td>
                                <td>2024-04-30</td>
                            </tr>
                            <tr>
                                <td>PMFBY/2024/002</td>
                                <td>Rice</td>
                                <td>Kharif 2024</td>
                                <td>‚Çπ75,000</td>
                                <td>‚Çπ1,125</td>
                                <td><span class="status active">Active</span></td>
                                <td>2024-10-31</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Admin Panel Tab -->
        <div id="admin" class="tab-content">
            <h2>‚öôÔ∏è Administrator Panel</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number">156</div>
                    <div class="stat-label">Pending Applications</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">89</div>
                    <div class="stat-label">Pending Claims</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">‚Çπ12.5L</div>
                    <div class="stat-label">Pending Payouts</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">98.5%</div>
                    <div class="stat-label">System Uptime</div>
                </div>
            </div>

            <div class="card">
                <h3>Pending Applications</h3>
                <table class="table">
                    <thead>
                        <tr>
                            <th>Application ID</th>
                            <th>Farmer Name</th>
                            <th>Crop</th>
                            <th>Sum Insured</th>
                            <th>Applied Date</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>APP001</td>
                            <td>Ram Kumar</td>
                            <td>Wheat</td>
                            <td>‚Çπ60,000</td>
                            <td>2024-05-25</td>
                            <td>
                                <button class="btn btn-success" onclick="approveApplication('APP001')">Approve</button>
                                <button class="btn btn-danger" onclick="rejectApplication('APP001')">Reject</button>
                            </td>
                        </tr>
                        <tr>
                            <td>APP002</td>
                            <td>Sita Devi</td>
                            <td>Cotton</td>
                            <td>‚Çπ80,000</td>
                            <td>2024-05-24</td>
                            <td>
                                <button class="btn btn-success" onclick="approveApplication('APP002')">Approve</button>
                                <button class="btn btn-danger" onclick="rejectApplication('APP002')">Reject</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="card">
                <h3>Pending Claims</h3>
                <table class="table">
                    <thead>
                        <tr>
                            <th>Claim ID</th>
                            <th>Farmer Name</th>
                            <th>Loss Type</th>
                            <th>Claim Amount</th>
                            <th>Filed Date</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>CLM003</td>
                            <td>Mohan Singh</td>
                            <td>Hailstorm</td>
                            <td>‚Çπ35,000</td>
                            <td>2024-05-22</td>
                            <td>
                                <button class="btn btn-success" onclick="approveClaim('CLM003')">Approve</button>
                                <button class="btn btn-danger" onclick="rejectClaim('CLM003')">Reject</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // Global variables to store data
        let farmers = [];
        let policies = [];
        let claims = [];
        let applications = [];

        // Tab switching functionality
        function showTab(tabName) {
            // Hide all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(tab => tab.classList.remove('active'));
            
            // Remove active class from all tabs
            const tabs = document.querySelectorAll('.nav-tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Show selected tab content
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked tab
            event.target.classList.add('active');
        }

        // District data mapping
        const stateDistricts = {
            'UP': ['Agra', 'Aligarh', 'Allahabad', 'Ambedkar Nagar', 'Amethi', 'Amroha', 'Auraiya', 'Azamgarh', 'Baghpat', 'Bahraich', 'Ballia', 'Balrampur', 'Banda', 'Barabanki', 'Bareilly', 'Basti', 'Bhadohi', 'Bijnor', 'Budaun', 'Bulandshahr', 'Chandauli', 'Chitrakoot', 'Deoria', 'Etah', 'Etawah', 'Faizabad', 'Farrukhabad', 'Fatehpur', 'Firozabad', 'Gautam Buddha Nagar', 'Ghaziabad', 'Ghazipur', 'Gonda', 'Gorakhpur', 'Hamirpur', 'Hapur', 'Hardoi', 'Hathras', 'Jalaun', 'Jaunpur', 'Jhansi', 'Kannauj', 'Kanpur Dehat', 'Kanpur Nagar', 'Kasganj', 'Kaushambi', 'Kheri', 'Kushinagar', 'Lalitpur', 'Lucknow', 'Maharajganj', 'Mahoba', 'Mainpuri', 'Mathura', 'Mau', 'Meerut', 'Mirzapur', 'Moradabad', 'Muzaffarnagar', 'Pilibhit', 'Pratapgarh', 'Raebareli', 'Rampur', 'Saharanpur', 'Sambhal', 'Sant Kabir Nagar', 'Shahjahanpur', 'Shamli', 'Shrawasti', 'Siddharthnagar', 'Sitapur', 'Sonbhadra', 'Sultanpur', 'Unnao', 'Varanasi'],
            'MP': ['Agar Malwa', 'Alirajpur', 'Anuppur', 'Ashoknagar', 'Balaghat', 'Barwani', 'Betul', 'Bhind', 'Bhopal', 'Burhanpur', 'Chhatarpur', 'Chhindwara', 'Damoh', 'Datia', 'Dewas', 'Dhar', 'Dindori', 'Guna', 'Gwalior', 'Harda', 'Hoshangabad', 'Indore', 'Jabalpur', 'Jhabua', 'Katni', 'Khandwa', 'Khargone', 'Mandla', 'Mandsaur', 'Morena', 'Narsinghpur', 'Neemuch', 'Panna', 'Raisen', 'Rajgarh', 'Ratlam', 'Rewa', 'Sagar', 'Satna', 'Sehore', 'Seoni', 'Shahdol', 'Shajapur', 'Sheopur', 'Shivpuri', 'Sidhi', 'Singrauli', 'Tikamgarh', 'Ujjain', 'Umaria', 'Vidisha'],
            'RJ': ['Ajmer', 'Alwar', 'Banswara', 'Baran', 'Barmer', 'Bharatpur', 'Bhilwara', 'Bikaner', 'Bundi', 'Chittorgarh', 'Churu', 'Dausa', 'Dholpur', 'Dungarpur', 'Ganganagar', 'Hanumangarh', 'Jaipur', 'Jaisalmer', 'Jalore', 'Jhalawar', 'Jhunjhunu', 'Jodhpur', 'Karauli', 'Kota', 'Nagaur', 'Pali', 'Pratapgarh', 'Rajsamand', 'Sawai Madhopur', 'Sikar', 'Sirohi', 'Tonk', 'Udaipur'],
            'PB': ['Amritsar', 'Barnala', 'Bathinda', 'Faridkot', 'Fatehgarh Sahib', 'Fazilka', 'Ferozepur', 'Gurdaspur', 'Hoshiarpur', 'Jalandhar', 'Kapurthala', 'Ludhiana', 'Mansa', 'Moga', 'Mohali', 'Muktsar', 'Pathankot', 'Patiala', 'Rupnagar', 'Sangrur', 'Shaheed Bhagat Singh Nagar', 'Tarn Taran'],
            'HR': ['Ambala', 'Bhiwani', 'Charkhi Dadri', 'Faridabad', 'Fatehabad', 'Gurgaon', 'Hisar', 'Jhajjar', 'Jind', 'Kaithal', 'Karnal', 'Kurukshetra', 'Mahendragarh', 'Mewat', 'Palwal', 'Panchkula', 'Panipat', 'Rewari', 'Rohtak', 'Sirsa', 'Sonipat', 'Yamunanagar'],
            'BH': ['Araria', 'Arwal', 'Aurangabad', 'Banka', 'Begusarai', 'Bhagalpur', 'Bhojpur', 'Buxar', 'Darbhanga', 'East Champaran', 'Gaya', 'Gopalganj', 'Jamui', 'Jehanabad', 'Kaimur', 'Katihar', 'Khagaria', 'Kishanganj', 'Lakhisarai', 'Madhepura', 'Madhubani', 'Munger', 'Muzaffarpur', 'Nalanda', 'Nawada', 'Patna', 'Purnia', 'Rohtas', 'Saharsa', 'Samastipur', 'Saran', 'Sheikhpura', 'Sheohar', 'Sitamarhi', 'Siwan', 'Supaul', 'Vaishali', 'West Champaran'],
            'WB': ['Alipurduar', 'Bankura', 'Birbhum', 'Cooch Behar', 'Dakshin Dinajpur', 'Darjeeling', 'Hooghly', 'Howrah', 'Jalpaiguri', 'Jhargram', 'Kalimpong', 'Kolkata', 'Malda', 'Murshidabad', 'Nadia', 'North 24 Parganas', 'Paschim Bardhaman', 'Paschim Medinipur', 'Purba Bardhaman', 'Purba Medinipur', 'Purulia', 'South 24 Parganas', 'Uttar Dinajpur'],
            'MH': ['Ahmednagar', 'Akola', 'Amravati', 'Aurangabad', 'Beed', 'Bhandara', 'Buldhana', 'Chandrapur', 'Dhule', 'Gadchiroli', 'Gondia', 'Hingoli', 'Jalgaon', 'Jalna', 'Kolhapur', 'Latur', 'Mumbai City', 'Mumbai Suburban', 'Nagpur', 'Nanded', 'Nandurbar', 'Nashik', 'Osmanabad', 'Palghar', 'Parbhani', 'Pune', 'Raigad', 'Ratnagiri', 'Sangli', 'Satara', 'Sindhudurg', 'Solapur', 'Thane', 'Wardha', 'Washim', 'Yavatmal']
        };

        // Premium calculation rates
        const premiumRates = {
            'Kharif': { rate: 0.02, farmerShare: 0.015 },
            'Rabi': { rate: 0.015, farmerShare: 0.015 },
            'Zaid': { rate: 0.05, farmerShare: 0.05 }
        };

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
            loadSampleData();
        });

        function setupEventListeners() {
            // State change event
            document.getElementById('state').addEventListener('change', updateDistricts);
            
            // Premium calculation on form changes
            document.getElementById('season').addEventListener('change', calculatePremium);
            document.getElementById('sumInsured').addEventListener('input', calculatePremium);
            
            // Form submissions
            document.getElementById('farmerRegistrationForm').addEventListener('submit', registerFarmer);
            document.getElementById('insuranceApplicationForm').addEventListener('submit', applyInsurance);
            document.getElementById('claimForm').addEventListener('submit', fileClaim);
            
            // Search functionality
            document.getElementById('claimSearch').addEventListener('input', searchClaims);
        }

        function updateDistricts() {
            const stateSelect = document.getElementById('state');
            const districtSelect = document.getElementById('district');
            
            // Clear existing options
            districtSelect.innerHTML = '<option value="">Select District</option>';
            
            if (stateSelect.value && stateDistricts[stateSelect.value]) {
                stateDistricts[stateSelect.value].forEach(district => {
                    const option = document.createElement('option');
                    option.value = district;
                    option.textContent = district;
                    districtSelect.appendChild(option);
                });
            }
        }

        function calculatePremium() {
            const season = document.getElementById('season').value;
            const sumInsured = parseFloat(document.getElementById('sumInsured').value) || 0;
            
            if (season && sumInsured > 0 && premiumRates[season]) {
                const totalPremium = sumInsured * premiumRates[season].rate;
                const farmerShare = sumInsured * premiumRates[season].farmerShare;
                
                document.getElementById('premiumAmount').value = totalPremium.toFixed(2);
                document.getElementById('farmerShare').value = farmerShare.toFixed(2);
            } else {
                document.getElementById('premiumAmount').value = '';
                document.getElementById('farmerShare').value = '';
            }
        }

        function registerFarmer(event) {
            event.preventDefault();
            
            const formData = new FormData(event.target);
            const farmerData = {
                id: 'F' + Date.now(),
                name: document.getElementById('farmerName').value,
                fatherName: document.getElementById('fatherName').value,
                aadhaar: document.getElementById('aadhaar').value,
                mobile: document.getElementById('mobile').value,
                state: document.getElementById('state').value,
                district: document.getElementById('district').value,
                village: document.getElementById('village').value,
                pincode: document.getElementById('pincode').value,
                bankAccount: document.getElementById('bankAccount').value,
                ifsc: document.getElementById('ifsc').value,
                landArea: parseFloat(document.getElementById('landArea').value),
                registrationDate: new Date().toISOString().split('T')[0]
            };
            
            farmers.push(farmerData);
            
            alert(`Farmer registered successfully! Your Farmer ID is: ${farmerData.id}`);
            event.target.reset();
            updateStats();
        }

        function applyInsurance(event) {
            event.preventDefault();
            
            const applicationData = {
                id: 'APP' + Date.now(),
                farmerId: document.getElementById('insuranceFarmerId').value,
                season: document.getElementById('season').value,
                cropType: document.getElementById('cropType').value,
                sowingArea: parseFloat(document.getElementById('sowingArea').value),
                sowingDate: document.getElementById('sowingDate').value,
                sumInsured: parseFloat(document.getElementById('sumInsured').value),
                premiumAmount: parseFloat(document.getElementById('premiumAmount').value),
                farmerShare: parseFloat(document.getElementById('farmerShare').value),
                applicationDate: new Date().toISOString().split('T')[0],
                status: 'Pending'
            };
            
            applications.push(applicationData);
            
            alert(`Insurance application submitted successfully! Your Application ID is: ${applicationData.id}`);
            event.target.reset();
            updateStats();
        }

        function fileClaim(event) {
            event.preventDefault();
            
            const claimData = {
                id: 'CLM' + Date.now(),
                farmerId: document.getElementById('claimFarmerId').value,
                policyNumber: document.getElementById('policyNumber').value,
                lossType: document.getElementById('lossType').value,
                lossDate: document.getElementById('lossDate').value,
                affectedArea: parseFloat(document.getElementById('affectedArea').value),
                lossPercentage: parseFloat(document.getElementById('lossPercentage').value),
                description: document.getElementById('lossDescription').value,
                claimAmount: 0, // Will be calculated based on policy
                status: 'Under Review',
                filedDate: new Date().toISOString().split('T')[0]
            };
            
            // Calculate claim amount (simplified calculation)
            claimData.claimAmount = Math.round((claimData.affectedArea * 50000 * claimData.lossPercentage) / 100);
            
            claims.push(claimData);
            
            alert(`Claim filed successfully! Your Claim ID is: ${claimData.id}`);
            event.target.reset();
            updateClaimsTable();
            updateStats();
        }

        function loadPolicies() {
            const farmerId = document.getElementById('policyFarmerId').value;
            if (!farmerId) {
                alert('Please enter a Farmer ID');
                return;
            }
            
            // Filter policies for the farmer (in real implementation, this would be a backend call)
            const farmerPolicies = policies.filter(policy => policy.farmerId === farmerId);
            
            if (farmerPolicies.length === 0) {
                alert('No policies found for this Farmer ID');
                return;
            }
            
            updateActivePoliciesTable(farmerPolicies);
        }

        function updateActivePoliciesTable(farmerPolicies = null) {
            const tbody = document.getElementById('activePoliciesTable');
            const policiesToShow = farmerPolicies || policies.slice(0, 5); // Show sample data or filtered data
            
            tbody.innerHTML = policiesToShow.map(policy => `
                <tr>
                    <td>${policy.policyNumber}</td>
                    <td>${policy.cropType}</td>
                    <td>${policy.season}</td>
                    <td>‚Çπ${policy.sumInsured.toLocaleString()}</td>
                    <td>‚Çπ${policy.premiumPaid.toLocaleString()}</td>
                    <td><span class="status ${policy.status.toLowerCase()}">${policy.status}</span></td>
                    <td>${policy.validTill}</td>
                </tr>
            `).join('');
        }

        function updateClaimsTable() {
            const tbody = document.getElementById('claimsTable');
            tbody.innerHTML = claims.slice(-5).map(claim => `
                <tr>
                    <td>${claim.id}</td>
                    <td>${claim.policyNumber}</td>
                    <td>${claim.lossType}</td>
                    <td>‚Çπ${claim.claimAmount.toLocaleString()}</td>
                    <td><span class="status ${claim.status.toLowerCase().replace(' ', '-')}">${claim.status}</span></td>
                    <td>${claim.filedDate}</td>
                </tr>
            `).join('');
        }

        function searchClaims() {
            const searchTerm = document.getElementById('claimSearch').value.toLowerCase();
            const filteredClaims = claims.filter(claim => 
                claim.id.toLowerCase().includes(searchTerm) ||
                claim.lossType.toLowerCase().includes(searchTerm) ||
                claim.status.toLowerCase().includes(searchTerm)
            );
            
            const tbody = document.getElementById('claimsTable');
            tbody.innerHTML = filteredClaims.map(claim => `
                <tr>
                    <td>${claim.id}</td>
                    <td>${claim.policyNumber}</td>
                    <td>${claim.lossType}</td>
                    <td>‚Çπ${claim.claimAmount.toLocaleString()}</td>
                    <td><span class="status ${claim.status.toLowerCase().replace(' ', '-')}">${claim.status}</span></td>
                    <td>${claim.filedDate}</td>
                </tr>
            `).join('');
        }

        function approveApplication(appId) {
            const application = applications.find(app => app.id === appId);
            if (application) {
                application.status = 'Approved';
                
                // Create a new policy
                const newPolicy = {
                    policyNumber: `PMFBY/2024/${policies.length + 1}`.padStart(15, '0'),
                    farmerId: application.farmerId,
                    cropType: application.cropType,
                    season: application.season,
                    sumInsured: application.sumInsured,
                    premiumPaid: application.farmerShare,
                    status: 'Active',
                    validTill: getValidTillDate(application.season),
                    issueDate: new Date().toISOString().split('T')[0]
                };
                
                policies.push(newPolicy);
                alert(`Application ${appId} approved! Policy Number: ${newPolicy.policyNumber}`);
                updateStats();
            }
        }

        function rejectApplication(appId) {
            const application = applications.find(app => app.id === appId);
            if (application) {
                application.status = 'Rejected';
                alert(`Application ${appId} has been rejected.`);
                updateStats();
            }
        }

        function approveClaim(claimId) {
            const claim = claims.find(c => c.id === claimId);
            if (claim) {
                claim.status = 'Approved';
                alert(`Claim ${claimId} approved! Amount ‚Çπ${claim.claimAmount.toLocaleString()} will be transferred.`);
                updateStats();
            }
        }

        function rejectClaim(claimId) {
            const claim = claims.find(c => c.id === claimId);
            if (claim) {
                claim.status = 'Rejected';
                alert(`Claim ${claimId} has been rejected.`);
                updateStats();
            }
        }

        function getValidTillDate(season) {
            const currentYear = new Date().getFullYear();
            switch(season) {
                case 'Kharif': return `${currentYear}-10-31`;
                case 'Rabi': return `${currentYear + 1}-04-30`;
                case 'Zaid': return `${currentYear}-09-30`;
                default: return `${currentYear}-12-31`;
            }
        }

        function updateStats() {
            // Update dashboard statistics
            document.getElementById('totalFarmers').textContent = farmers.length.toLocaleString();
            document.getElementById('activePolicies').textContent = policies.filter(p => p.status === 'Active').length.toLocaleString();
            document.getElementById('claimsProcessed').textContent = claims.filter(c => c.status !== 'Under Review').length.toLocaleString();
            
            const totalPayout = claims
                .filter(c => c.status === 'Approved')
                .reduce((sum, c) => sum + c.claimAmount, 0);
            document.getElementById('totalPayout').textContent = `‚Çπ${(totalPayout / 10000000).toFixed(1)} Cr`;
        }

        function loadSampleData() {
            // Load sample farmers
            farmers = [
                {
                    id: 'F1001',
                    name: 'Ram Kumar',
                    fatherName: 'Shyam Kumar',
                    aadhaar: '123456789012',
                    mobile: '9876543210',
                    state: 'UP',
                    district: 'Agra',
                    village: 'Rampur',
                    pincode: '282001',
                    bankAccount: '1234567890',
                    ifsc: 'SBIN0001234',
                    landArea: 2.5,
                    registrationDate: '2024-01-15'
                },
                {
                    id: 'F1002',
                    name: 'Sita Devi',
                    fatherName: 'Ganga Ram',
                    aadhaar: '234567890123',
                    mobile: '9876543211',
                    state: 'MP',
                    district: 'Bhopal',
                    village: 'Kolar',
                    pincode: '462001',
                    bankAccount: '2345678901',
                    ifsc: 'SBIN0002345',
                    landArea: 1.8,
                    registrationDate: '2024-02-10'
                }
            ];

            // Load sample policies
            policies = [
                {
                    policyNumber: 'PMFBY/2024/001',
                    farmerId: 'F1001',
                    cropType: 'Wheat',
                    season: 'Rabi 2024',
                    sumInsured: 50000,
                    premiumPaid: 750,
                    status: 'Active',
                    validTill: '2024-04-30',
                    issueDate: '2024-01-20'
                },
                {
                    policyNumber: 'PMFBY/2024/002',
                    farmerId: 'F1002',
                    cropType: 'Rice',
                    season: 'Kharif 2024',
                    sumInsured: 75000,
                    premiumPaid: 1125,
                    status: 'Active',
                    validTill: '2024-10-31',
                    issueDate: '2024-06-15'
                }
            ];

            // Load sample claims
            claims = [
                {
                    id: 'CLM001',
                    farmerId: 'F1001',
                    policyNumber: 'PMFBY/2024/001',
                    lossType: 'Drought',
                    lossDate: '2024-03-15',
                    affectedArea: 1.5,
                    lossPercentage: 50,
                    description: 'Severe drought conditions affected wheat crop',
                    claimAmount: 25000,
                    status: 'Under Review',
                    filedDate: '2024-05-20'
                },
                {
                    id: 'CLM002',
                    farmerId: 'F1002',
                    policyNumber: 'PMFBY/2024/002',
                    lossType: 'Flood',
                    lossDate: '2024-07-10',
                    affectedArea: 1.0,
                    lossPercentage: 80,
                    description: 'Heavy monsoon flooding damaged rice crop',
                    claimAmount: 40000,
                    status: 'Approved',
                    filedDate: '2024-05-15'
                }
            ];

            // Load sample applications
            applications = [
                {
                    id: 'APP001',
                    farmerId: 'F1001',
                    season: 'Kharif',
                    cropType: 'Cotton',
                    sowingArea: 2.0,
                    sowingDate: '2024-06-01',
                    sumInsured: 80000,
                    premiumAmount: 1600,
                    farmerShare: 1200,
                    applicationDate: '2024-05-25',
                    status: 'Pending'
                }
            ];

            updateStats();
            updateClaimsTable();
        }

        // Weather alert simulation
        function showWeatherAlert() {
            const alerts = [
                "üåßÔ∏è Heavy rainfall expected in Punjab and Haryana. Farmers advised to protect standing crops.",
                "‚òÄÔ∏è Heat wave conditions in Rajasthan. Ensure adequate irrigation for summer crops.",
                "üå™Ô∏è Cyclone warning for coastal areas of Maharashtra. Take necessary precautions.",
                "‚ùÑÔ∏è Unexpected frost warning in North India. Cover sensitive crops."
            ];
            
            const randomAlert = alerts[Math.floor(Math.random() * alerts.length)];
            document.querySelector('.alert-info strong').nextSibling.textContent = ' Weather Alert: ' + randomAlert;
        }

        // Simulate weather alerts every 30 seconds
        setInterval(showWeatherAlert, 30000);

        // Add some interactive features
        function exportData(type) {
            let data, filename;
            
            switch(type) {
                case 'farmers':
                    data = farmers;
                    filename = 'farmers_data.json';
                    break;
                case 'policies':
                    data = policies;
                    filename = 'policies_data.json';
                    break;
                case 'claims':
                    data = claims;
                    filename = 'claims_data.json';
                    break;
                default:
                    return;
            }
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = filename;
            link.click();
        }

        // Add notification system
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `alert alert-${type}`;
            notification.style.position = 'fixed';
            notification.style.top = '20px';
            notification.style.right = '20px';
            notification.style.zIndex = '9999';
            notification.style.minWidth = '300px';
            notification.innerHTML = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }

        // Enhanced form validation
        function validateAadhaar(aadhaar) {
            return /^[0-9]{12}$/.test(aadhaar);
        }

        function validateMobile(mobile) {
            return /^[6-9][0-9]{9}$/.test(mobile);
        }

        function validateIFSC(ifsc) {
            return /^[A-Z]{4}0[A-Z0-9]{6}$/.test(ifsc);
        }

        // Add real-time validation
        document.addEventListener('DOMContentLoaded', function() {
            const aadhaarInput = document.getElementById('aadhaar');
            const mobileInput = document.getElementById('mobile');
            const ifscInput = document.getElementById('ifsc');
            
            if (aadhaarInput) {
                aadhaarInput.addEventListener('input', function() {
                    if (this.value.length === 12 && !validateAadhaar(this.value)) {
                        this.style.borderColor = '#dc3545';
                    } else {
                        this.style.borderColor = '#28a745';
                    }
                });
            }
            
            if (mobileInput) {
                mobileInput.addEventListener('input', function() {
                    if (this.value.length === 10 && !validateMobile(this.value)) {
                        this.style.borderColor = '#dc3545';
                    } else {
                        this.style.borderColor = '#28a745';
                    }
                });
            }
            
            if (ifscInput) {
                ifscInput.addEventListener('input', function() {
                    if (this.value.length === 11 && !validateIFSC(this.value)) {
                        this.style.borderColor = '#dc3545';
                    } else {
                        this.style.borderColor = '#28a745';
                    }
                });
            }
        });
    </script>
</body>
</html>